(this.webpackJsonpauctioneer=this.webpackJsonpauctioneer||[]).push([[0],{59:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c(24),a=c(10),s=c(70),i=c(42),j=(c(50),c(60),c(61),i.a.initializeApp({apiKey:"AIzaSyAp9XrnMQ2kd-L8I2kVOZJctYBAT-h66tM",authDomain:"polanco-25ef9.firebaseapp.com",projectId:"polanco-25ef9",storageBucket:"polanco-25ef9.appspot.com",messagingSenderId:"804200542961",appId:"1:804200542961:web:010ee2a2d4e45ec098af50"})),l=i.a.firestore.FieldValue.serverTimestamp,o=j.firestore(),u=j.storage(),b=j.auth(),d=c(2),O=Object(r.createContext)(),x=function(e){var t=e.children,c=Object(r.useState)(null),n=Object(a.a)(c,2),s=n[0],i=n[1],j=Object(r.useState)(!0),l=Object(a.a)(j,2),u=l[0],x=l[1],h=Object(r.useState)(""),m=Object(a.a)(h,2),p=m[0],f=m[1];return Object(r.useEffect)((function(){return b.onAuthStateChanged((function(e){i(e),x(!1)}))}),[]),Object(r.useEffect)((function(){var e=setTimeout((function(){return f("")}),5e3);return function(){return clearTimeout(e)}}),[p]),Object(d.jsx)(O.Provider,{value:{currentUser:s,register:function(e,t){return b.createUserWithEmailAndPassword(e,t)},login:function(e,t){return b.signInWithEmailAndPassword(e,t)},logout:function(){return b.signOut()},bidAuction:function(e){return o.collection("auctions").doc(e).update({completed:!0})},endAuction:function(e){return o.collection("auctions").doc(e).delete()},globalMsg:p},children:!u&&t})},h=c(16),m=c.n(h),p=c(22),f=c(68),v=c(65),g=c(45),y=c(69),w=c(66),C=function(e){var t=e.setAuction,c=Object(r.useState)(!1),n=Object(a.a)(c,2),i=n[0],j=n[1],l=Object(r.useState)(""),o=Object(a.a)(l,2),u=o[0],b=o[1],x=Object(r.useRef)(),h=Object(r.useRef)(),C=Object(r.useRef)(),N=Object(r.useRef)(),k=Object(r.useRef)(),S=Object(r.useRef)(),R=Object(r.useRef)(),L=Object(r.useRef)(),A=Object(r.useRef)(),I=Object(r.useContext)(O).currentUser,P=function(){return j(!1)},G=["image/png","image/jpeg","image/jpg"],q=function(){var e=Object(p.a)(m.a.mark((function e(c){var r,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),b(""),G.includes(N.current.files[0].type)){e.next=4;break}return e.abrupt("return",b("por favor use una imagen valida (png, jpeg, jpg)"));case 4:r=new Date,n=r.setHours(r.getHours()),a={email:I.email,nombre:x.current.value,marca:h.current.value,curPrice:C.current.value,duration:n,talla:S.current.value,color:R.current.value,itemImage:N.current.files[0],para:k.current.value,tela:L.current.value,piezas:A.current.value,completed:!1},t(a),P();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"col d-flex justify-content-center my-3 ",children:Object(d.jsx)("div",{onClick:function(){return j(!0)},className:"btn btn-primary mx-5                 ",children:"+ A\xf1adir a Inventario"})}),Object(d.jsx)(f.a,{centered:!0,show:i,onHide:P,style:{width:"96%",marginLeft:"1%"},children:Object(d.jsxs)("form",{onSubmit:q,style:{backgroundColor:"rgb(222,222,222)"},children:[Object(d.jsxs)(f.a.Body,{children:[u&&Object(d.jsx)(s.a,{variant:"danger",children:u}),Object(d.jsx)(v.a,{children:Object(d.jsx)(g.a,{className:"border mb-5 btn bg-primary mx-2 p-2 text-center text-white",children:I.email})}),Object(d.jsx)(v.a,{children:Object(d.jsx)(g.a,{children:Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Nombre"}),Object(d.jsx)(y.a.Control,{type:"text",required:!0,ref:x})]})})}),Object(d.jsx)(v.a,{children:Object(d.jsxs)(g.a,{children:[Object(d.jsx)(y.a.Label,{children:"Para"}),Object(d.jsxs)(y.a.Control,{as:"select",multiple:!1,ref:k,children:[Object(d.jsx)("option",{value:"hombre",children:"hombre"}),Object(d.jsx)("option",{value:"mujer",children:"mujer"})]})]})}),Object(d.jsx)(v.a,{children:Object(d.jsx)(g.a,{children:Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Precio"}),Object(d.jsx)(y.a.Control,{type:"number",required:!0,ref:C})]})})}),Object(d.jsx)(v.a,{children:Object(d.jsx)(g.a,{children:Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Marca"}),Object(d.jsx)(y.a.Control,{type:"text",required:!0,ref:h})]})})}),Object(d.jsx)(v.a,{children:Object(d.jsx)(g.a,{children:Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Talla"}),Object(d.jsx)(y.a.Control,{type:"text",required:!0,ref:S})]})})}),Object(d.jsx)(v.a,{children:Object(d.jsx)(g.a,{children:Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Color"}),Object(d.jsx)(y.a.Control,{type:"text",required:!0,ref:R})]})})}),Object(d.jsx)(v.a,{children:Object(d.jsx)(g.a,{children:Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Tela"}),Object(d.jsx)(y.a.Control,{type:"text",required:!0,ref:L})]})})}),Object(d.jsx)(v.a,{children:Object(d.jsx)(g.a,{children:Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Piezas"}),Object(d.jsx)(y.a.Control,{type:"number",required:!0,ref:A})]})})}),Object(d.jsx)(v.a,{children:Object(d.jsxs)(g.a,{children:[Object(d.jsx)(y.a.Label,{children:"IMG"}),Object(d.jsx)(y.a.Group,{children:Object(d.jsx)(y.a.File,{label:"Cargar Foto",custom:!0,required:!0,ref:N})})]})})]}),Object(d.jsxs)(f.a.Footer,{children:[Object(d.jsx)(w.a,{variant:"secondary",onClick:P,children:"Cancelar"}),Object(d.jsx)(w.a,{variant:"primary",type:"submit",children:"Guardar"})]})]})})]})},N=c(28),k=function(e){var t=Object(r.useState)([]),c=Object(a.a)(t,2),n=c[0],s=c[1];return Object(r.useEffect)((function(){var t=o.collection(e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(N.a)(Object(N.a)({},e.data()),{},{id:e.id}))})),s(t)}));return function(){return t()}}),[e]),{docs:n}},S=function(e){var t=e.item,c=Object(r.useContext)(O),n=(c.currentUser,c.bidAuction,k("auctions").docs),a=0;return n.map((function(e){e.id===t.id&&(a=e.curPrice),e.id===t.id&&e.completed})),Object(d.jsx)("div",{className:"col mb-4",children:Object(d.jsxs)("div",{className:"card shadow-sm",children:[Object(d.jsx)("div",{style:{height:"180px",backgroundImage:"url(".concat(t.imgUrl,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},className:"w-100 mt-4"}),Object(d.jsxs)("div",{className:"card-body p-4",children:[Object(d.jsxs)("p",{className:"h4",children:[Object(d.jsx)("span",{className:"text-secondary",children:"Nombre "}),t.nombre]}),Object(d.jsx)("div",{className:"d-flex jsutify-content-between align-item-center",children:Object(d.jsxs)("h5",{children:[Object(d.jsx)("span",{className:"text-secondary",children:"Para: "})," ",t.para]})}),Object(d.jsx)("div",{children:Object(d.jsx)("p",{})}),Object(d.jsxs)("h5",{className:"card-text",children:[" Marca: ",t.marca]}),Object(d.jsxs)("h5",{className:"card-text",children:[" Talla: ",t.talla]}),Object(d.jsxs)("h5",{className:"card-text",children:[" Color: ",t.color]}),Object(d.jsxs)("h5",{className:"card-text",children:[" Tela: ",t.tela]}),Object(d.jsxs)("h5",{className:"card-text",children:[" Piezas: ",t.piezas]}),Object(d.jsx)("div",{className:"d-flex justify-content-between align-item-center",children:Object(d.jsxs)("p",{className:"display-6",children:["Precio $",a]})})]})]})})},R=c(67),L=function(e){var t=Object(r.useState)(0),c=Object(a.a)(t,2),n=c[0],s=c[1],i=Object(r.useState)(null),j=Object(a.a)(i,2),b=j[0],d=j[1];return Object(r.useState)((function(){var t=u.ref(e.itemImage.name),c=o.collection("auctions");t.put(e.itemImage).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){console.log(e)}),Object(p.a)(m.a.mark((function r(){var n,a;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getDownloadURL();case 2:return n=r.sent,a=l(),delete e.itemImage,r.next=7,c.add(Object(N.a)(Object(N.a)({},e),{},{createdAt:a,imgUrl:n}));case 7:d(!0);case 8:case"end":return r.stop()}}),r)}))))}),[e]),{progress:n,isCompleted:b}},A=function(e){var t=e.auction,c=e.setAuction,n=L(t),a=n.progress,s=n.isCompleted;return Object(r.useEffect)((function(){s&&c(null)}),[s,c]),Object(d.jsx)(R.a.div,{style:{height:"5px",background:"black"},initial:{width:0},animate:{width:"".concat(a,"%")}})},I=function(){var e,t=Object(r.useState)(null),c=Object(a.a)(t,2),n=c[0],i=c[1],j=Object(r.useContext)(O),l=j.currentUser,o=j.globalMsg,u=k("auctions").docs;return e=!!l&&l.email?u.filter((function(e){return e.email===l.email})):[],Object(d.jsxs)("div",{className:"",children:[n&&Object(d.jsx)(A,{auction:n,setAuction:i}),Object(d.jsx)("div",{style:{zIndex:"9999999"},className:"text-center w-50 position-fixed top-10 start-50 translate-middle",children:o&&Object(d.jsx)(s.a,{variant:"danger",children:o})}),l&&Object(d.jsx)(C,{setAuction:i}),e&&Object(d.jsx)("div",{className:"row row-cols-1 row-cols-md-3 row-cols-lg-4 p-5 g-3 border mt-1 ",children:e.map((function(e,t){return Object(d.jsx)(S,{item:e},t)}))})]})},P=c.p+"static/media/canal10.917c2ae2.png",G=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),c=t[0],n=t[1],i=Object(r.useState)(""),j=Object(a.a)(i,2),l=j[0],o=j[1],u=Object(r.useRef)(),b=Object(r.useRef)(),x=Object(r.useContext)(O).login,h=function(){return n(!1)},v=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o(""),e.prev=2,e.next=5,x(u.current.value,b.current.value);case 5:h(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),o("Invalid login");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{onClick:function(){return n(!0)},className:"btn btn-outline-secondary mx-2",children:"Entrar"}),Object(d.jsx)(f.a,{centered:!0,show:c,onHide:h,children:Object(d.jsxs)("form",{onSubmit:v,children:[Object(d.jsx)(f.a.Header,{children:Object(d.jsx)(f.a.Title,{children:"Entrar"})}),Object(d.jsxs)(f.a.Body,{children:[l&&Object(d.jsx)(s.a,{variant:"danger",children:l}),Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Email "}),Object(d.jsx)(y.a.Control,{type:"email",required:!0,ref:u})]}),Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Password"}),Object(d.jsx)(y.a.Control,{type:"password",required:!0,ref:b})]})]}),Object(d.jsxs)(f.a.Footer,{children:[Object(d.jsx)(w.a,{variant:"secondary",onClick:h,children:"Cancelar"}),Object(d.jsx)(w.a,{variant:"primary",type:"submit",children:"Entrar"})]})]})})]})},q=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),c=t[0],n=t[1],i=Object(r.useState)(""),j=Object(a.a)(i,2),l=j[0],o=j[1],u=Object(r.useRef)(),b=Object(r.useRef)(),x=Object(r.useRef)(),h=Object(r.useContext)(O).register,v=function(){return n(!1)},g=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o(""),b.current.value===x.current.value){e.next=4;break}return e.abrupt("return",o("Passwords does not match"));case 4:return e.prev=4,e.next=7,h(u.current.value,b.current.value);case 7:v(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),o(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{onClick:function(){return n(!0)},className:"btn btn-outline-secondary mx-2 d-none",children:"Registro"}),Object(d.jsx)(f.a,{centered:!0,show:c,onHide:v,children:Object(d.jsxs)("form",{onSubmit:g,children:[Object(d.jsx)(f.a.Header,{children:Object(d.jsx)(f.a.Title,{children:"Registro"})}),Object(d.jsxs)(f.a.Body,{children:[l&&Object(d.jsx)(s.a,{variant:"danger",children:l}),Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Email"}),Object(d.jsx)(y.a.Control,{type:"email",required:!0,ref:u})]}),Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Password"}),Object(d.jsx)(y.a.Control,{type:"password",required:!0,ref:b})]}),Object(d.jsxs)(y.a.Group,{children:[Object(d.jsx)(y.a.Label,{children:"Confirmar Password"}),Object(d.jsx)(y.a.Control,{type:"password",required:!0,ref:x})]})]}),Object(d.jsxs)(f.a.Footer,{children:[Object(d.jsx)(w.a,{variant:"secondary",onClick:v,children:"Cancelar"}),Object(d.jsx)(w.a,{variant:"primary",type:"submit",children:"Registro"})]})]})})]})},E=function(){var e=Object(r.useContext)(O),t=e.currentUser,c=e.logout;return Object(d.jsx)("nav",{className:"container navbar navbar-light ",children:Object(d.jsxs)("div",{className:"container d-flex flex-column",children:[Object(d.jsx)("div",{className:"navbar-brand mb-4",children:Object(d.jsx)("img",{src:P,alt:"logo",height:"110"})}),Object(d.jsx)("div",{className:"d-flex",children:Object(d.jsx)("div",{className:"col mb-4",children:t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"btn btn-secondary mx-2 disabled",children:t.email}),Object(d.jsx)("div",{onClick:function(){return c()},className:"btn btn-outline-secondary mx-2",children:"SALIR"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(G,{}),Object(d.jsx)(q,{})]})})})]})})},F=function(){return Object(d.jsxs)(x,{children:[Object(d.jsx)(E,{}),Object(d.jsx)(I,{})]})};c(58);Object(n.render)(Object(d.jsx)(F,{}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.ddd00354.chunk.js.map